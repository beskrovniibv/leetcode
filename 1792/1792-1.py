#! /usr/bin/python python

from typing import List

E = 10e-5


class Solution:
    def maxAverageRatio(self, classes: List[List[int]], extraStudents: int) -> float:
        cl = []
        s = 0
        for c in classes:
            c0 = c[0]/c[1]
            cl.append([c[0], c[1], c0, (c[0] + 1) / (c[1] + 1) - c0])  # for c in classes]
            s += cl[-1][2]
        cl.sort(key=lambda c: c[3])
        for _ in range(extraStudents):
            i = -1
            cl[i][0] += 1
            cl[i][1] += 1
            s -= cl[i][2]
            c0 = cl[i][0] / cl[i][1]
            cl[i][2] = c0
            s += cl[i][2]
            cl[i][3] = ((cl[i][0] + 1) / (cl[i][1] + 1)) - c0
            if cl[i][3] < cl[i - 1][3]:
                cl.sort(key=lambda c: c[3])
        return s/len(cl)


def main():
    examples = (
        (
            [[494,710],[365,473],[354,356],[635,994],[528,763],[553,944],[223,797],[137,557],[248,425],[685,820],[65,971],[246,264],[307,969],[548,923],[475,925],[343,645],[454,997],[17,504],[500,721],[136,972],[28,436],[192,397],[293,575],[387,706],[196,895],[606,689],[409,823],[715,759],[27,250],[496,659],[349,903],[372,456],[81,317],[881,977],[60,990],[532,966],[162,323],[55,140],[371,484],[248,875],[625,908],[659,942],[44,728],[36,846],[15,958],[489,997],[470,917],[479,838],[440,788],[249,416],[107,181],[249,292],[236,312],[26,109],[211,440],[681,944],[293,928],[508,773],[288,816],[314,966],[113,647],[143,478],[288,321],[319,807],[602,852],[348,553],[37,305],[202,262],[476,515],[741,983],[544,861],[229,773],[4,321],[468,957],[67,114],[362,437],[44,259],[144,710],[666,717],[313,517],[384,801],[352,409],[184,929],[798,886],[54,480],[335,861],[168,616],[235,835],[167,492],[437,637],[408,560],[113,320],[780,924],[94,628],[471,997],[167,885],[604,966],[446,503],[144,655],[65,760],[32,572],[547,717],[491,585],[552,615],[136,245],[46,921],[551,814],[309,424],[701,827],[586,993],[899,944],[264,475],[358,584],[342,566],[375,529],[35,581],[185,438],[228,509],[836,997],[381,647],[260,674],[744,986],[761,775],[68,249],[266,632],[300,867],[526,792],[35,301],[490,946],[494,724],[168,888],[95,868],[602,690],[544,932],[204,561],[52,586],[536,596],[293,348],[68,569],[232,618],[607,672],[149,174],[698,737],[444,647],[628,984],[322,649],[727,965],[205,621],[797,961],[477,683],[943,989],[190,906],[1,783],[52,208],[18,79],[397,804],[371,922],[193,448],[860,938],[6,166],[437,838],[33,252],[64,927],[116,403],[379,384],[566,864],[616,840],[137,876],[390,536],[97,655],[326,763],[502,648],[4,479],[241,414],[82,576],[444,869],[604,616],[20,386],[353,528],[238,301],[408,509],[414,984],[52,379],[64,863],[418,621],[439,602],[161,945],[149,708],[196,339],[145,504],[424,936],[322,773],[7,791],[375,907],[382,981],[372,748],[83,803],[393,770],[135,733],[661,972],[38,895],[51,145],[317,751],[271,341],[42,82],[131,141],[246,326],[216,987],[162,773],[204,455],[382,419],[135,319],[608,804],[188,472],[26,588],[183,752],[642,970],[33,125],[145,765],[425,676],[299,526],[218,773],[59,920],[73,618],[538,987],[526,795],[554,937],[727,956],[435,750],[275,710],[482,573],[452,477],[594,663],[635,927],[84,579],[109,352],[308,893],[235,799],[46,244],[119,211],[184,672],[403,771],[772,840],[415,912],[132,649],[579,847],[237,576],[212,658],[500,896],[602,707],[658,928],[158,703],[759,990],[644,776],[120,393],[368,456],[22,688],[617,980],[493,825],[500,653],[61,790],[256,625],[291,920],[178,519],[481,624],[70,768],[326,880],[89,984],[268,852],[714,832],[310,533],[691,870],[133,558],[654,955],[61,323],[82,151],[513,943],[134,717],[177,682],[26,794],[548,631],[1,63],[71,774],[370,553],[489,944],[50,703],[538,887],[664,689],[80,547],[466,471],[581,939],[19,689],[283,365],[83,460],[66,356],[180,182],[588,776],[5,591],[199,405],[583,686],[230,967],[159,499],[126,357],[537,879],[690,933],[503,844],[106,611],[737,885],[554,638],[182,697],[513,936],[100,317],[308,993],[91,923],[636,960],[120,586],[330,551],[452,590],[595,758],[296,451],[296,776],[450,519],[805,805],[546,933],[473,604],[154,312],[277,597],[859,937],[80,848],[293,684],[35,582],[406,891],[134,734],[502,597],[670,967],[791,841],[748,880],[332,735],[269,683],[125,979],[297,592],[228,447],[250,400],[554,599],[75,412],[130,691],[44,260],[260,699],[241,787],[83,348],[265,940],[107,391],[135,248],[498,995],[332,474],[417,795],[84,523],[480,597],[37,999],[204,445],[404,580],[585,697],[267,790],[632,633],[132,776],[137,879],[387,868],[19,57],[659,985],[55,859],[4,452],[355,528],[457,839],[335,997],[191,823],[682,716],[215,984],[452,744],[220,638],[205,678],[399,942],[340,793],[726,969],[286,454],[166,281],[308,687],[90,785],[623,637],[73,561],[542,634],[492,585],[558,608],[250,982],[98,512],[123,461],[518,559],[116,171],[714,994],[333,661],[535,732],[387,801],[230,596],[99,534],[462,804],[115,235],[784,864],[90,488],[258,591],[527,962],[310,841],[21,342],[619,825],[698,816],[250,394],[157,442],[514,580],[70,460],[488,906],[263,420],[757,858],[554,806],[570,591],[70,722],[126,930],[394,957],[122,859],[274,388],[33,873],[95,558],[77,353],[402,1000],[482,692],[491,960],[687,765],[661,962],[161,657],[44,410],[268,408],[402,692],[395,464],[16,731],[249,693],[134,551],[76,511],[215,414],[110,861],[706,791],[934,966],[735,979],[202,473],[414,651],[416,446],[27,820],[23,288],[45,795],[499,759],[134,429],[610,796],[181,762],[194,517],[386,846],[291,903],[954,987],[82,977],[44,561],[424,728],[150,479],[163,305],[41,666],[308,600],[33,300],[537,630],[301,336],[33,500],[89,960],[168,759],[649,798],[694,771],[393,610],[720,954],[505,646],[271,835],[460,801],[24,431],[36,303],[792,903],[51,356],[205,351],[186,251],[142,967],[94,857],[42,97],[159,858],[315,324],[505,607],[588,614],[22,486],[395,592],[389,558],[241,754],[146,539],[564,788],[108,939],[428,567],[230,396],[571,983],[9,611],[848,876],[576,586],[324,986],[420,813],[398,905],[572,893],[645,947],[224,682],[136,448],[181,839],[113,582],[116,739],[306,834]], 61506, 0.60171
        ),
        (
            [[129,381],[729,1000],[15,551],[207,789],[276,638],[67,830],[474,804],[13,291],[273,663],[743,985],[514,709],[23,580],[115,412],[101,702],[330,620],[635,653],[705,713],[587,951],[459,909],[94,626],[511,543],[352,604],[696,895],[45,193],[57,174],[120,632],[44,826],[121,569],[313,543],[772,804],[166,206],[154,547],[234,887],[92,223],[362,516],[707,920],[577,861],[274,446],[138,630],[293,592],[255,832],[72,877],[272,611],[59,956],[23,443],[626,989],[290,864],[433,487],[447,861],[70,829],[190,220],[696,787],[35,954],[653,844],[440,776],[870,977],[364,425],[364,964],[524,933],[152,184],[232,809],[235,830],[61,965],[69,375],[458,889],[330,834],[223,225],[159,264],[708,913],[534,722],[110,391],[490,702],[750,921],[801,953],[2,627],[320,484],[269,796],[719,813],[299,920],[214,818],[136,707],[390,652],[36,679],[787,807],[392,469],[549,886],[25,135],[238,878],[506,661],[102,908],[304,719],[447,640],[206,529],[101,342],[249,255],[504,589],[119,183],[368,509],[659,724],[610,966],[650,916],[444,640],[410,567],[432,996],[773,858],[25,641],[409,969],[145,890],[131,436],[63,300],[398,632],[441,654],[98,207],[278,613],[491,610],[271,433],[521,850],[110,786],[334,802],[157,967],[575,732],[551,801],[266,967],[689,924],[26,694],[576,677],[751,933],[100,789],[380,466],[272,769],[97,291],[143,823],[87,417],[723,995],[29,390],[491,597],[134,737],[785,794],[574,994],[401,504],[821,862],[239,791],[29,522],[386,823],[64,421],[87,616],[256,689],[41,923],[86,466],[301,626],[41,356],[44,788],[70,75],[47,848],[315,599],[316,363],[93,551],[482,636],[367,871],[335,877],[176,788],[643,910],[364,898],[256,539],[336,618],[239,255],[650,791],[223,719],[319,980],[314,852],[331,550],[310,732],[5,602],[493,673],[259,895],[674,804],[152,236],[248,996],[166,882],[87,266],[208,409],[142,169],[567,835],[937,989],[815,876],[637,859],[76,324],[396,931],[217,723],[40,163],[222,457],[411,810],[116,718],[319,919],[226,791],[653,739],[297,524],[668,814],[345,457],[71,86],[73,844],[123,237],[475,537],[732,848],[470,570],[11,616],[172,976],[444,470],[113,554],[16,197],[250,316],[220,532],[302,622],[316,931],[271,943],[273,358],[49,295],[30,896],[11,642],[800,876],[44,452],[79,212],[324,464],[312,678],[118,253],[690,891],[114,198],[31,200],[652,928],[139,639],[611,703],[685,906],[27,998],[451,747],[30,573],[233,851],[178,487],[545,858],[939,973],[10,230],[65,142],[17,893],[141,329],[591,936],[87,530],[268,553],[200,408],[9,557],[287,361],[266,556],[395,895],[414,543],[542,547],[286,477],[91,185],[491,778],[404,577],[137,924],[214,633],[27,539],[53,530],[325,867],[149,225],[327,407],[42,902],[419,746],[608,855],[487,852],[515,901],[67,804],[706,818],[36,135],[421,569],[399,560],[279,558],[46,607],[199,223],[312,724],[390,981],[307,932],[24,531],[584,955],[196,274],[534,549],[547,759],[167,909],[91,236],[216,492],[54,169],[674,862],[413,911],[16,290],[155,821],[102,859],[41,969],[602,726],[441,487],[180,979],[839,965],[224,580],[480,832],[677,958],[111,994],[679,885],[415,894],[65,230],[131,347],[487,519],[506,525],[377,677],[444,837],[597,879],[255,867],[454,975],[267,965],[365,414],[396,822],[235,580],[387,924],[636,887],[109,186],[704,889],[615,646],[353,825],[27,78],[430,897],[506,601],[63,781],[472,923],[113,641],[664,783],[968,971],[240,466],[360,525],[94,910],[344,694],[38,284],[604,863],[537,786],[630,865],[133,344],[172,586],[441,704],[320,734],[454,748],[250,502],[393,768],[29,984],[261,514],[124,294],[26,266],[87,580],[333,641],[527,679],[186,225],[301,758],[83,175],[381,467],[409,653],[796,834],[464,987],[828,887],[484,695],[680,681],[854,867],[106,577],[501,577],[86,956],[35,687],[20,61],[38,286],[276,319],[181,551],[489,633],[698,735],[18,346],[466,895],[244,351],[869,991],[232,355],[753,866],[730,943],[24,60],[452,525],[203,404],[157,184],[84,238],[42,405],[179,328],[5,466],[552,836],[540,635],[40,167],[433,858],[228,835],[264,960],[532,690],[982,995],[194,449],[42,859],[620,864],[387,733],[409,421],[437,524],[279,454],[346,579],[25,948],[81,484],[750,853],[430,768],[166,919],[165,441],[557,856],[522,797],[520,747],[516,638],[177,274],[423,767],[293,493],[356,981],[725,959],[468,892],[408,565],[294,386],[246,368],[556,558],[832,908],[721,734],[231,544],[21,272],[674,873],[75,270],[727,898],[165,400],[271,789],[603,820],[259,503],[17,164],[496,841],[114,225],[116,156],[59,394],[70,177],[98,480],[563,748],[480,671],[26,805],[60,278],[53,542],[484,911],[658,760],[213,365],[449,610],[114,347],[327,921],[392,895],[670,959],[298,399],[85,235],[744,838],[452,575],[358,438],[442,727],[746,927],[447,764],[273,602],[155,192],[55,878],[339,986],[361,991],[69,386],[608,647],[813,997],[326,590],[925,994],[149,182],[737,783],[862,937],[118,641],[210,545],[489,970],[239,722],[368,632],[541,934],[642,729],[166,792],[209,307],[176,870],[142,768],[410,663],[436,501],[360,721],[35,799],[78,545],[25,377],[160,255],[219,932],[406,455],[523,604],[280,437],[611,880],[347,948],[494,922],[84,349],[607,626],[57,796],[143,940],[570,869],[482,761],[181,971],[9,94],[25,67],[188,286],[199,738],[412,472],[555,731],[278,524],[715,997],[881,943],[271,698],[394,571],[108,890],[405,725],[248,475],[73,745],[321,752],[138,703],[28,619],[645,724],[388,653],[58,298],[354,790],[674,885],[928,954],[18,712],[450,636],[325,599],[11,781],[324,546],[905,942],[747,806],[402,712],[778,968],[53,750],[598,833],[458,700],[703,875],[667,707],[100,434],[416,754],[127,879],[580,903],[12,18],[937,957],[571,794],[419,610],[781,996],[180,357],[415,753],[42,147],[951,963],[293,827],[529,718],[421,628],[661,844],[171,808],[481,584],[301,741],[597,831],[263,610],[696,759],[36,798],[401,904],[553,963],[422,608],[150,936],[175,332],[403,465],[592,949],[570,937],[922,991],[129,680],[516,917],[81,658],[603,620],[631,978],[267,403],[402,501],[35,747],[642,824],[298,758],[164,863],[649,959],[276,398],[128,281],[262,989],[10,994],[123,854],[688,947],[816,863],[110,480],[155,970],[247,478],[244,802],[43,231],[82,111],[835,955],[99,746],[39,593],[117,674],[45,259],[151,425],[356,835],[52,117],[818,863],[399,932],[814,999],[629,640],[229,842],[164,550],[502,588],[887,897],[176,968],[361,849],[408,620],[525,847],[811,817],[579,685],[176,334],[543,877],[73,954],[645,828],[51,770],[16,980],[590,828],[102,306],[90,462],[1,893],[49,679],[288,760],[313,562],[606,955],[638,970],[777,804],[261,470],[121,393],[832,987],[229,661],[314,657],[682,798],[129,522],[514,907],[764,962],[25,375],[727,893],[97,458],[442,832],[160,689],[117,282],[259,383],[778,842],[217,337],[636,945],[145,572],[229,963],[8,630],[236,725],[495,861],[368,657],[131,419],[352,686],[438,922],[451,639],[115,257],[55,541],[303,735],[327,528],[204,214],[235,857],[248,754],[356,386],[263,893],[2,504],[519,791],[144,438],[496,784],[93,529],[819,853],[103,283],[112,225],[415,437],[118,146],[451,683],[531,843],[683,975],[222,817],[166,221],[280,375],[721,858],[335,356],[258,765],[581,773],[32,153],[227,264],[494,946],[800,924],[549,611],[17,351],[18,932],[858,961],[179,818],[206,715],[266,659],[236,931],[75,437],[378,705],[380,705],[771,833],[195,785],[109,986],[5,956],[348,402],[338,587],[701,814],[352,421],[603,809],[264,708],[413,968],[630,773],[283,792],[362,629],[77,952],[824,946],[448,865],[229,628],[484,903],[355,792],[290,735],[30,109],[544,609],[56,974],[176,638],[231,773],[792,903],[450,549],[301,869],[409,434],[5,637],[70,407],[157,749],[213,602],[863,935],[486,687],[404,956],[102,506],[420,940],[662,803],[169,943],[732,923],[505,676],[221,672],[317,992],[571,798],[38,882],[301,306],[143,807],[258,843],[527,664],[312,488],[137,447],[342,534],[216,329],[41,285],[319,515],[882,941],[302,589],[307,510]], 67313, 0.60316
        ),
        (
            [[1, 2], [3, 5], [2, 2]], 2, 0.78333
        ),
        (
            [[2, 4], [3, 9], [4, 5], [2, 10]], 4, 0.53485
        ),
    )
    solution = Solution()
    for idx, example in enumerate(examples):
        classes, extraStudents, expected = example
        got = solution.maxAverageRatio(
            classes=classes,
            extraStudents=extraStudents
        )
        assert abs(got - expected) < E, f"Error in sample {idx + 1}: expected {expected}, got {got}."


if __name__ == "__main__":
    main()
